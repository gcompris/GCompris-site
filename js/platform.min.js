/*! Platform.js v1.0.0 <http://mths.be/platform>
 * Copyright 2010-2013 John-David Dalton <http://allyoucanleet.com/>
 * Available under MIT license <http://mths.be/mit>
 */!function(a){"use strict";var j=a,c="object"==typeof exports&&exports,k="object"==typeof global&&global&&(global==global.global?a=global:global),g=/Opera/,l=Object.prototype.toString,b=/Java/.test(v(a.java))&&a.java,m=b&&"Environment"==v(a.environment),n=b?"a":"\u03B1",o=b?"b":"\u03B2",p=a.document||{},q={}.hasOwnProperty,h=a.navigator||{},d=a.operamini||a.opera,e=g.test(e=v(d))?e:d=null,r=this,s=h.userAgent||"";function t(a){return(a=String(a)).charAt(0).toUpperCase()+a.slice(1)}function u(a){return a=z(a),/^(?:webOS|i(?:OS|P))/.test(a)?a:t(a)}function i(a,c){for(var b in a)w(a,b)&&c(a[b],b,a)}function v(a){return null==a?t(a):l.call(a).slice(8,-1)}function w(){return w=function(a,b){var c=null!=a&&(a.constructor||Object).prototype;return!!c&&b in Object(a)&&!(b in c&&a[b]===c[b])},"Function"==v(q)?w=function(a,b){return null!=a&&q.call(a,b)}:({}).__proto__==Object.prototype&&(w=function(a,d){var b,c=!1;return null!=a&&((a=Object(a)).__proto__=(b=a.__proto__,a.__proto__=null,c=d in a,b)),c}),w.apply(this,arguments)}function x(a){return String(a).replace(/([ -])(?!$)/g,"$1?")}function y(a,c){var b=null;return!function(a,d){var b=-1,c=a.length;if(c==c>>>0)for(;++b<c;)d(a[b],b,a);else i(a,d)}(a,function(d,e){b=c(b,d,e,a)}),b}function z(a){return String(a).replace(/^ +| +$/g,"")}function f(B){B||(B=s);var N,O,P,Q,M,J,K,L,q,H=B,C=[],I=null,G=B==s,A=G&&d&&"function"==typeof d.version&&d.version(),E=y(N=[{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","Trident","KHTML","Gecko"],function(b,a){return b||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(B)&&(a.label||a)}),t=y(O=["Adobe AIR","Arora","Avant Browser","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","Iron","K-Meleon","Konqueror","Lunascape","Maxthon","Midori","Nook Browser","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser","Sunrise","Swiftfox","WebPositive","Opera Mini","Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"IE",pattern:"MSIE"},"Safari"],function(b,a){return b||RegExp("\\b"+(a.pattern||x(a))+"\\b","i").exec(B)&&(a.label||a)}),D=R(["BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},"Google TV","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nook","PlayBook","PlayStation Vita","TouchPad","Transformer","Xoom"]),F=y(P={Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1},HP:{TouchPad:1},LG:{},Motorola:{Xoom:1},Nokia:{},Samsung:{"Galaxy S":1,"Galaxy S2":1},Sony:{"PlayStation Vita":1}},function(c,b,a){return c||(b[D]||b[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+(a.pattern||x(a))+"(?:\\b|\\w*\\d)","i").exec(B))&&(a.label||a)}),w=y(Q=["Android","CentOS","Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(a,b){var c=b.pattern||x(b);return!a&&(a=RegExp("\\b"+c+"(?:/[\\d.]+|[ \\w.]*)","i").exec(B))&&(q={"6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},/^Win/i.test(a)&&(q=q[/[\d.]+$/.exec(a)])&&(a="Windows "+q),a=u(String(a).replace(RegExp(c,"i"),b.label||b).replace(/ ce$/i," CE").replace(/hpw/i,"web").replace(/Macintosh/,"Mac OS").replace(/_PowerPC/i," OS").replace(/(OS X) [^ \d]+/i,"$1").replace(/Mac (OS X)/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/x86\.64/gi,"x86_64").split(" on ")[0])),a});function R(a){return y(a,function(a,b){var c=b.pattern||x(b);return!a&&(a=RegExp("\\b"+c+" *\\d+[.\\w_]*","i").exec(B)||RegExp("\\b"+c+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(B))&&((a=String(b.label||a).split("/"))[1]&&!/[\d.]+/.test(a[0])&&(a[0]+=" "+a[1]),b=b.label||b,a=u(a[0].replace(RegExp(c,"i"),b).replace(RegExp("; *(?:"+b+"[_-])?","i")," ").replace(RegExp("("+b+")(\\w)","i"),"$1 $2"))),a})}if(E&&(E=[E]),F&&!D&&(D=R([F])),(q=/Google TV/.exec(D))&&(D=q[0]),/\bSimulator\b/i.test(B)&&(D=(D?D+" ":"")+"Simulator"),/^iP/.test(D)?(t||(t="Safari"),w="iOS"+((q=/ OS ([\d_]+)/i.exec(B))?" "+q[1].replace(/_/g,"."):"")):"Konqueror"!=t||/buntu/i.test(w)?F&&"Google"!=F&&(/Chrome/.test(t)&&!/Mobile Safari/.test(B)||/Vita/.test(D))?(t="Android Browser",w=/Android/.test(w)?w:"Android"):(!t||(q=!/\bMinefield\b/i.test(B)&&/Firefox|Safari/.exec(t)))&&(t&&!D&&/[\/,]|^[^(]+?\)/.test(B.slice(B.indexOf(q+"/")+8))&&(t=null),(q=D||F||w)&&(D||F||/Android|Symbian OS|Tablet OS|webOS/.test(w))&&(t=/[a-z]+(?: Hat)?/i.exec(/Android/.test(w)?w:q)+" Browser")):w="Kubuntu",A||(A=(M=["(?:Cloud9|CriOS|CrMo|Opera ?Mini|OPR|Raven|Silk(?!/[\\d.]+$))","Version",x(t),"(?:Firefox|Minefield|NetFront)"],y(M,function(a,b){return a||(RegExp(b+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(B)||0)[1]||null}))),"iCab"==E&&parseFloat(A)>3?E=["WebKit"]:(q=/Opera/.test(t)&&(/OPR/.test(B)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(B)&&"WebKit"|| !E&&/\bMSIE\b/i.test(B)&&("Mac OS"==w?"Tasman":"Trident"))&&(E=[q]),G){if(K="global",L=null!=(J=a)?typeof J[K]:"number",/^(?:boolean|number|string|undefined)$/.test(L)||"object"==L&&!J[K])"ScriptBridgingProxyObject"==v(q=a.runtime)?(t="Adobe AIR",w=q.flash.system.Capabilities.os):"RuntimeObject"==v(q=a.phantom)?(t="PhantomJS",A=(q=q.version||null)&&q.major+"."+q.minor+"."+q.patch):"number"==typeof p.documentMode&&(q=/\bTrident\/(\d+)/i.exec(B))&&(A=[A,p.documentMode],(q=+q[1]+4)!=A[1]&&(C.push("IE "+A[1]+" mode"),E[1]="",A[1]=q),A="IE"==t?String(A[1].toFixed(1)):A[0]);else if(b&&(H=(q=b.lang.System).getProperty("os.arch"),w=w||q.getProperty("os.name")+" "+q.getProperty("os.version")),c){if(r==j&&"object"==typeof system&&(q=[system])[0]){w||(w=q[0].os||null);try{q[1]=require("ringo/engine").version,A=q[1].join("."),t="RingoJS"}catch(S){q[0].global==k&&(t="Narwhal")}}else"object"==typeof process&&(q=process)?(t="Node.js",H=q.arch,w=q.platform,A=/[\d.]+/.exec(q.version)[0]):m&&(t="Rhino")}else m&&(t="Rhino");w=w&&u(w)}return A&&(q=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(A)||/(?:alpha|beta)(?: ?\d)?/i.exec(B+";"+(G&&h.appMinorVersion))||/\bMinefield\b/i.test(B)&&"a")&&(I=/b/i.test(q)?"beta":"alpha",A=A.replace(RegExp(q+"\\+?$"),"")+("beta"==I?o:n)+(/\d+\+?/.exec(q)||"")),"Fennec"==t?t="Firefox Mobile":"Maxthon"==t&&A?A=A.replace(/\.[\d.]+/,".x"):"Silk"==t?(/Mobi/i.test(B)||(w="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(B)&&C.unshift("accelerated")):"IE"==t&&(q=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(B)||0)[1])?(t+=" Mobile",w="Windows Phone OS "+q+".x",C.unshift("desktop mode")):("Chrome"==t||"IE"==t||t&&!D&&!/Browser|Mobi/.test(t))&&("Windows CE"==w||/Mobi/i.test(B))?t+=" Mobile":"IE"==t&&G&&"object"==typeof external&&!external?C.unshift("platform preview"):/BlackBerry/.test(D)&&(q=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(B)||0)[1]||A)?(w="Device Software "+q,A=null):this!=i&&(G&&d||/Opera/.test(t)&&/\b(?:MSIE|Firefox)\b/i.test(B)||"Firefox"==t&&/OS X (?:\d+\.){2,}/.test(w)||"IE"==t&&(w&&!/^Win/.test(w)&&A>5.5||/Windows XP/.test(w)&&A>8||8==A&&!/Trident/.test(B)))&&!g.test(q=f.call(i,B.replace(g,"")+";"))&&q.name&&(q="ing as "+q.name+((q=q.version)?" "+q:""),g.test(t)?(/IE/.test(q)&&"Mac OS"==w&&(w=null),q="identify"+q):(q="mask"+q,t=e?u(e.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/IE/.test(q)&&(w=null),G||(A=null)),E=["Presto"],C.push(q)),(q=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(B)||0)[1])&&(q=[parseFloat(q.replace(/\.(\d)$/,".0$1")),q],"Safari"==t&&"+"==q[1].slice(-1)?(t="WebKit Nightly",I="alpha",A=q[1].slice(0,-1)):(A==q[1]||A==(/\bSafari\/([\d.]+\+?)/i.exec(B)||0)[1])&&(A=null),q=[q[0],(/\bChrome\/([\d.]+)/i.exec(B)||0)[1]],!G||/internal|\n/i.test(l.toString())&&!q[1]?(E[1]="like Safari",q=(q=q[0])<400?1:q<500?2:q<526?3:q<533?4:q<534?"4+":q<535?5:"5"):(E[1]="like Chrome",q=q[1]||((q=q[0])<530?1:q<532?2:q<532.05?3:q<533?4:q<534.03?5:q<534.07?6:q<534.1?7:q<534.13?8:q<534.16?9:q<534.24?10:q<534.3?11:q<535.01?12:q<535.02?"13+":q<535.07?15:q<535.11?16:q<535.19?17:q<536.05?18:q<536.1?19:q<537.01?20:"21")),E[1]+=" "+(q+="number"==typeof q?".x":/[.+]/.test(q)?"":"+"),"Safari"==t&&(!A||parseInt(A)>45)&&(A=q)),"Opera"==t&&(q=/(?:zbov|zvav)$/.exec(w))?(t+=" ",C.unshift("desktop mode"),"zvav"==q?(t+="Mini",A=null):t+="Mobile"):"Safari"==t&&/Chrome/.exec(E[1])&&(C.unshift("desktop mode"),t="Chrome Mobile",A=null,/OS X/.test(w)?(F="Apple",w="iOS 4.3+"):w=null),A&&0==A.indexOf(q=/[\d.]+$/.exec(w))&&B.indexOf("/"+q+"-")> -1&&(w=z(w.replace(q,""))),E&&!/Avant|Nook/.test(t)&&(/Browser|Lunascape|Maxthon/.test(t)||/^(?:Adobe|Arora|Midori|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(t)&&E[1])&&(q=E[E.length-1])&&C.push(q),C.length&&(C=["("+C.join("; ")+")"]),F&&D&&0>D.indexOf(F)&&C.push("on "+F),D&&C.push((/^on /.test(C[C.length-1])?"":"on ")+D),w&&(w={architecture:32,family:(q=/ ([\d.+]+)$/.exec(w))?w.replace(q[0],""):w,version:q?q[1]:null,toString:function(){var a=this.version;return this.family+(a?" "+a:"")+(64==this.architecture?" 64-bit":"")}}),(q=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(H))&&!/\bi686\b/i.test(H)&&(w&&(w.architecture=64,w.family=w.family.replace(RegExp(" *"+q),"")),t&&(/WOW64/i.test(B)||G&&/\w(?:86|32)$/.test(h.cpuClass||h.platform))&&C.unshift("32-bit")),B||(B=null),{version:t&&A&&(C.unshift(A),A),name:t&&(C.unshift(t),t),os:w?(t&&!(w==String(w).split(" ")[0]&&(w==t.split(" ")[0]||D))&&C.push(D?"("+w+")":"on "+w),w):{architecture:null,family:null,version:null,toString:function(){return"null"}},description:C.length?C.join(" "):B,layout:E&&E[0],manufacturer:F,prerelease:I,product:D,ua:B,parse:f,toString:function(){return this.description||""}}}"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return f()}):c&&!c.nodeType?i(f(),function(a,b){c[b]=a}):a.platform=f()}(this)
